<!DOCTYPE html>
<meta charset="utf-8">

<svg/>

<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.11.0/d3.js"></script>

<script>
    w = 5000
    h = 5000
    
    var graph = 


    var svg = d3.select("svg")
        .attr("width", w)
        .attr("height", h)
        .attr("style","background: lightgray;");
        
    var link = svg.selectAll("line")
        .data(graph.links)
        .enter()
        .append("line")
        .style("stroke", "black");
     
     var node = svg.selectAll("circle")
         .data(graph.nodes)
         .enter()
         .append("circle")
         .attr("r", 100)
         .attr("fill", function (d) {return d.color;})
         .attr("stroke", "black")
         .attr("stroke-width", 0)
         .on("click", toggleSelected)
         .call(d3.drag()
             .on("start", dragstarted)
             .on("drag", dragged)
             .on("end", dragended));

     node.append("title")
         .text(function(d) { return d.id; });
         
     var simulation = d3.forceSimulation()
         .force("link", d3.forceLink().id(function(d) { return d.id; }).distance(200))
         .force("charge", d3.forceManyBody())
         .force("center", d3.forceCenter(w / 2, h / 2));
         
     simulation.nodes(graph.nodes).on("tick", ticked);
 
     simulation.force("link").links(graph.links);
 
     function ticked() {
         link
             .attr("x1", function(d) { return d.source.x; })
             .attr("y1", function(d) { return d.source.y; })
             .attr("x2", function(d) { return d.target.x; })
             .attr("y2", function(d) { return d.target.y; });
     
         node
             .attr("cx", function(d) { return d.x; })
             .attr("cy", function(d) { return d.y; });
         }
     
     function toggleSelected(d) {
         d.isSelected = !d.isSelected;
         d3.select(this).style("stroke-width", d.isSelected ? 2 : 0);
         console.log(d)
     }
     
     function dragstarted(d) {
       if (!d3.event.active) simulation.alphaTarget(0.3).restart();
       d.fx = d.x;
       d.fy = d.y;
     }
 
     function dragged(d) {
       d.fx = d3.event.x;
       d.fy = d3.event.y;
     }
 
     function dragended(d) {
       if (!d3.event.active) simulation.alphaTarget(0);
       d.fx = null;
       d.fy = null;
     }
 
</script>